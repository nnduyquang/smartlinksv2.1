function getBaseURL(){var e=location.href,t=e.substring(0,e.indexOf("/",14));if(-1!=t.indexOf("http://localhost")){var e=location.href,n=location.pathname,o=e.indexOf(n),r=e.indexOf("/",o+1);return e.substr(0,r)+"/"}return t+"/"}function selectFileWithKCFinder(e,t){window.KCFinder={callBack:function(n){document.getElementById(e).value=n,$("#"+t).show(),$("#"+t).fadeIn("fast").attr("src",n),window.KCFinder=null}},window.open(getBaseURL()+"js/kcfinder/browse.php?type=images","kcfinder_textbox","status=0, toolbar=0, location=0, menubar=0, directories=0, resizable=1, scrollbars=0, width=800, height=600"),""==$("#"+e).val()?$("#"+t).hide():$("#"+t).show()}function integratedCKEDITOR(e,t){if($("#"+e).length){CKEDITOR.replace(e,{height:t,language:"vi",format_tags:"p;h1;h2;h3;pre",filebrowserBrowseUrl:"../../../js/kcfinder/browse.php?type=files",filebrowserImageBrowseUrl:"../../../js/kcfinder/browse.php?type=images",filebrowserFlashBrowseUrl:"../../../js/kcfinder/browse.php?type=flash",filebrowserUploadUrl:"../../../js/kcfinder/upload.php?type=files",filebrowserImageUploadUrl:"../../../js/kcfinder/upload.php?type=images",filebrowserFlashUploadUrl:"../../../js/kcfinder/upload.php?type=flash",extraAllowedContent:"div"}).on("instanceReady",function(){this.dataProcessor.writer.selfClosingEnd=">";var e=CKEDITOR.dtd;for(var t in CKEDITOR.tools.extend({},e.$nonBodyContent,e.$block,e.$listItem,e.$tableContent))this.dataProcessor.writer.setRules(t,{indent:!0,breakBeforeOpen:!0,breakAfterOpen:!0,breakBeforeClose:!0,breakAfterClose:!0})})}}function integrateSearch(e,t){$("#"+e).click(function(){""!=$("#txtSearch").val().trim()&&$("#txtSearch").val().trim().replace(/ +(?= )/g,"")!=$("input[name='hdKeyword']").val()&&$("#"+t).submit()})}function isEmpty(e){return""!==e&&void 0!==e&&e.length>0&&null!==e}function selectFileWithCKFinder(e){CKFinder.popup({chooseFiles:!0,width:800,height:600,onInit:function(t){t.on("files:choose",function(t){var n=t.data.files.first();document.getElementById(e).value=n.getUrl(),$("#showSliderImage").show(),$("#showSliderImage").fadeIn("fast").attr("src",n.getUrl())}),t.on("file:choose:resizedImage",function(t){document.getElementById(e).value=t.data.resizedUrl,$("#showSliderImage").show(),$("#showSliderImage").fadeIn("fast").attr("src",file.getUrl())})}})}function selectFileWithCKFinder(e){window.KCFinder={callBack:function(t){document.getElementById(e).value=t,$("#showEmpImage").show(),$("#showEmpImage").fadeIn("fast").attr("src",t),window.KCFinder=null}},window.open(getBaseURL()+"js/kcfinder/browse.php?type=images","kcfinder_textbox","status=0, toolbar=0, location=0, menubar=0, directories=0, resizable=1, scrollbars=0, width=800, height=600")}var token=$('meta[name="csrf-token"]').attr("content");if($(".edit-menu").click(function(){$("#menu-update").css("display","block");var e=$(this).attr("data-id");$.ajax({type:"GET",url:getBaseURL()+"sml_admin/menu/"+e+"/edit",dataType:"json",data:{_token:token},success:function(e){if(e.success){var t="",n=e.dd_menus;for(i=0;i<n.length;i++)n[i].index==e.menu.parent_id?t+='<option value="'+n[i].index+'" selected>'+n[i].value+"</option>":t+='<option value="'+n[i].index+'">'+n[i].value+"</option>";var o='<div class="row"><div class="menu-box-top"><h4>Cập Nhật Menu</h4></div><div class="menu-box-bottom"><form id="menu-update-form" data-id='+e.menu.id+' method="POST" action="'+getBaseURL()+"sml_admin/menu/"+e.menu.id+'" accept-charset="UTF-8"><input name="_method" type="hidden" value="PATCH"><input name="_token" type="hidden" value="'+token+'"><input placeholder="Tên Menu" value="'+e.menu.name+'" class="form-control" name="name" type="text"><input placeholder="STT" value="'+e.menu.order+'" class="form-control" name="order" type="text"><span>Menu Cấp Cha</span><span class="show-error">Lựa Chọn Không Hợp Lệ</span><select class="form-control" name="parent">'+t+'</select><div class="menu-confirm"><input class="menu-confirm-ok btn confirm-update" type="button" value="CẬP NHẬT"></div></form></div></div>';$("#menu-update").html(o),$(".confirm-update").click(function(){$(".show-error").css("display","none"),$(".show-error").removeClass("blink_me");var e=$("#menu-update-form"),t=e.attr("data-id");$('#menu-update-form select[name="parent"]').val()==t?($(".show-error").css("display","block"),$(".show-error").addClass("blink_me")):e.submit()})}},error:function(e){alert("zo error")}})}),$("#btnBrowseImageSlider").length){var button1=document.getElementById("btnBrowseImageSlider");button1.onclick=function(){selectFileWithCKFinder("path")}}if(""==$("#path").val()?$("#showSliderImage").hide():$("#showSliderImage").show(),integratedCKEDITOR("emp-note",800),$("#btnBrowseImageEmp").length){var button1=document.getElementById("btnBrowseImageEmp");button1.onclick=function(){selectFileWithCKFinder("path")}}if(""==$("#path").val()?$("#showEmpImage").hide():$("#showEmpImage").show(),integrateSearch("btnSearchEmp","formSearchEmp"),integratedCKEDITOR("description-page",height=200),integratedCKEDITOR("content-page",height=800),integratedCKEDITOR("seo-description-page",height=200),$("#btnBrowseImagePage").length){var button1=document.getElementById("btnBrowseImagePage");button1.onclick=function(){selectFileWithKCFinder("pathImagePage","showHinhPage")}}if($("#email-sender-content").length&&CKEDITOR.replace("email-sender-content",{height:200,language:"vi",format_tags:"p;h1;h2;h3;pre",filebrowserImageBrowseUrl:"../../js/ckfinder/ckfinder.html?Type=images",filebrowserFlashBrowseUrl:"../../js/ckfinder/ckfinder.html?Type=flash",filebrowserImageUploadUrl:"../../js/ckfinder/core/connector/php/connector.php?command=QuickUpload&type=Images",filebrowserFlashUploadUrl:"../../js/ckfinder/core/connector/php/connector.php?command=QuickUpload&type=Flash"}),$("#email-signatures").length&&CKEDITOR.replace("email-signatures",{height:200,language:"vi",format_tags:"p;h1;h2;h3;pre",filebrowserImageBrowseUrl:"../../js/ckfinder/ckfinder.html?Type=images",filebrowserFlashBrowseUrl:"../../js/ckfinder/ckfinder.html?Type=flash",filebrowserImageUploadUrl:"../../js/ckfinder/core/connector/php/connector.php?command=QuickUpload&type=Images",filebrowserFlashUploadUrl:"../../js/ckfinder/core/connector/php/connector.php?command=QuickUpload&type=Flash"}),$(".alert-success").fadeIn(500),setTimeout("$('.alert-success').fadeOut(1500);",3e3),integratedCKEDITOR("description-post",height=200),integratedCKEDITOR("content-post",height=800),integratedCKEDITOR("seo-description-post",height=200),$("#btnBrowseImagePost").length){var button1=document.getElementById("btnBrowseImagePost");button1.onclick=function(){selectFileWithKCFinder("pathImagePost","showHinhPost")}}if(integratedCKEDITOR("description-tuyen-dung",height=200),integratedCKEDITOR("content-tuyen-dung",height=800),integratedCKEDITOR("seo-description-tuyen-dung",height=200),$("#btnBrowseImageTuyenDung").length){var button1=document.getElementById("btnBrowseImageTuyenDung");button1.onclick=function(){selectFileWithKCFinder("pathImageTuyenDung","showHinhTuyenDung")}}